let pubKey = `-----BEGIN PGP PUBLIC KEY BLOCK-----

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
cN9a
=BpRk
-----END PGP PUBLIC KEY BLOCK-----`

$(document).ready(() => {
  let donate_size = 5.0

  $(".denomination").click(function(event) {
    $(".denomination").removeClass("selected").prop('checked', false);
    $(".denomination-other input").removeClass("selected").val('');
    $(this).addClass("selected");
    $(this).children(":first").prop('checked', true);
    $("button").text('Donate $' + $(this).children(":first").val())
  });

  $(".denomination-other input").on('keypress', function (event) {
    // allow only int values
    // TODO: remove leading 0
    var regex = new RegExp("^[0-9]+$");
    var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
    if (!regex.test(key)) {
      event.preventDefault();
      return false;
    }

    $(".denomination").removeClass("selected").prop('checked', false);
    $(this).addClass("selected");
    donate_size = $(this).val() + key
    $("button").text('Donate $' + $(this).val() + key );
  })
  $("button").click(() => {
    const payment_type = $('input[name=payment]:checked').val()
    const recurring_maybe = $('input[name=donation_type]:checked').val()
    switch(payment_type) {
      case 'paypal':
        if (recurring_maybe === 'recurring') {
          window.location.replace(`/paypal/create_donation_agreement/${donate_size}`)
        } else {
          window.location.replace(`/paypal/create_donation/${donate_size}`)
        }
        break
      case 'creditcard':
        break
      case 'cryptocurrency':
        window.location.replace(`/crypto`)
        break
      case 'iban':
        window.location.replace(`/iban`)
        break
    }
  })

  $('button.cryptocopy').click(function(){
    var btntxt = $(this).text()
    var copy = $(this).parent().find('.copy').text().trim()

    var $temp = $("<input>")
    $("body").append($temp)
    $temp.val(copy).select()
    document.execCommand("copy")
    $temp.remove()

    $('.confirmation').hide().html('Copied <b>' + btntxt + ' code</b> to clipboard').fadeIn(100).delay(800).fadeOut(200)
  })

  $('.addresses div div.coinview').click(function(){
    var range = document.createRange()
    var selection = window.getSelection()
    range.selectNodeContents(this)
    selection.removeAllRanges()
    selection.addRange(range)
  })

})



